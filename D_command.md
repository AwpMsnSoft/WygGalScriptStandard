# 标识符定义指令（D指令）
- 标识符定义指令（D指令）与其他指令格式不同，且允许表达式中含有空格，具体说明中将不再赘述语法逃逸。
## 定义指令（DEF指令）:
- 定义指令的作用为定义常量、数组、常量标识符，也包括重定义和解除定义；
- 若变量（包括数组）失去作用，则应当及时解除定义；
- 在循环中不应使用定义指令，尤其是对数组，因为这些指令较为消耗系统资源。
--------
### **.defvar**  
> 概述：定义一个变量或数组变量。
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |$Var|✔||||
- 指令说明： 
    - 定义一个名称为$Var的变量，使其值为Default ；
        ```
        ##定义一个变量$Example，初始值为Default ：
        .defvar $Example
        ```
    - 关键错误：已定义同名常量或变量（无论是否为数组），或已有同名指令，或变量的名称不符合wgs语法规定。

>
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |$Var|✔|||\$Var = Initialization|
- 指令说明： 
    - 定义一个名称为$Var的变量，使其值为表达式Initialization ；
        ```
        ##定义一个变量$Example，初始值为文本"Hello" ：
        .defvar $Example = "Hello"
        ```
    - 关键错误：已定义同名常量或变量（无论是否为数组），或已有同名指令，或变量的名称不符合wgs语法规定。
>
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |[]VarArray|✔||✔||
- 指令说明： 
    - 定义一个名称为[]VarArray的数组变量，使其值为空数组 {} ；
        ```
        ##定义一个数组[]ExampleArray，初始值为{} ：
        .defvar []ExampleArray
        ```
    - 关键错误：已定义同名常量或变量（无论是否为数组），或已有同名指令，或变量的名称不符合wgs语法规定。
     
>
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |[\]VarArray|✔||✔|[]VarArray = {ArrayInitialization}|
- 指令说明： 
    - 定义一个名称为[]VarArray的数组变量，使其值为数组表达式 {ArrayInitialization} ；
        ```
        ##定义一个数组变量[]ExampleArray，初始值为{16,9} ：
        .defvar []ExampleArray = {16,9}
        ```
    - 关键错误：已定义同名常量或变量（无论是否为数组），或已有同名指令，或变量的名称不符合wgs语法规定。
>
--------

### **.redef**  
> 概述：不考虑先前变量是否定义，重新定义一个变量或数组变量。
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |$Var|✔||||
- 指令说明： 
    1. 若定义了同名数组变量，则先解除该定义；
    2. 若变量$Var未定义，则定义一个名称为\$Var的变量，初始值为Default，否则变量的值不变；
        ```
        ##定义一个变量$Example，不必考虑先前是否已定义同名变量：
        .redef $Example
        ```
    - 关键错误：已定义同名常量（无论是否为数组），或已有同名指令，或变量的名称不符合wgs语法规定。
>
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |$Var|✔|||\$Var = Initialization|
- 指令说明： 
    1. 若定义了同名数组变量，则先解除该定义；
    2. 若变量$Var未定义，则定义一个名称为\$Var的变量；
    3. 将变量\$Var的值修改为表达式Initialization ；
        ```
        ##定义一个变量$Example，并使其值为文本"Hello"，不必考虑先前是否已定义同名变量：
        .redef $Example = "Hello"
        ```
    - 关键错误：已定义同名常量（无论是否为数组），或已有同名指令，或变量的名称不符合wgs语法规定。
>
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |[]VarArray|✔||✔||
    1. 若定义了同名非数组变量，则先解除该定义；
    2. 若数组变量[\]VarArray未定义，则定义一个名称为[]VarArray的数组变量，初始值为{}，否则原先数组变量不变；
        ```
        ##定义一个数组[]ExampleArray，不必考虑先前是否已定义同名变量：
        .redef []ExampleArray
        ```
    - 关键错误：已定义同名常量（无论是否为数组），或已有同名指令，或变量的名称不符合wgs语法规定。
>
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |[\]VarArray|✔||✔|[]VarArray = {ArrayInitialization}|
- 指令说明： 
    1. 若定义了同名非数组变量，则先解除该定义；
    2. 若数组变量[\]VarArray未定义，则定义一个名称为[]VarArray的数组变量；
    3. 将数组变量[\]VarArray的值修改为表达式{ArrayInitialization} ；
        ```
        ##定义一个数组变量[]Example，并使其值为{1920,1080,60}，不必考虑先前是否已定义同名变量：
        .redef []ExampleArray = {1920,1080,60}
        ```
    - 关键错误：已定义同名常量（无论是否为数组），或已有同名指令，或变量的名称不符合wgs语法规定。
--------

### **.defconst**  
> 概述：定义一个常量或数组常量，已定义的常量不可改变或重新定义，除非使用.reset指令。
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |$CONST||✔||\$CONST = ConstValue|
- 指令说明： 
    - 定义一个名称为$CONST的常量，值为ConstValue ；
        ```
        ##定义一个常量$EXAMPLE，其值为文本"Hello" ：
        .defconst $EXAMPLE = "Hello"
        ```
    - 为与变量区分，建议常量标识符名称全部为大写。
    - 关键错误：已定义同名变量（包括数组），或新定义的常量值与旧的同名常量（无论是否为数组）不同，或已有同名指令，或常量的名称不符合wgs语法规定。
>
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |[\]CONSTARRAY||✔|✔|[]CONSTARRAY = {ConstArrayValues}|
- 指令说明： 
    - 定义一个名称为[]CONSTARRAY的数组常量，值为数组表达式 {ConstArrayValues} ；
        ```
        ##定义一个常量数组[]EXAMPLEARRAY，其值为数组{1920,1080,144} ：
        .defconst []EXAMPLEARRAY = {1920,1080,144} 
        ```
    - 关键错误：已定义同名变量（包括数组），或新定义的数组常量值与旧的同名常量（无论是否为数组）不同，或已有同名指令，或常量的名称不符合wgs语法规定。
--------
### **.undef**  
> 概述：解除变量或数组变量的定义。
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |$DefName|✔||||
    
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |[]DefName|✔||✔||

- 指令说明： 
    - 若定义了名称为$DefName的变量或数组变量[]DefName，则解除该定义，否则什么也不做；
    - 在该指令中，$DefName与[\]DefName是等价的，无论是否为数组，均能够正常解除定义，因为使用者可能并不知道先前定义的是否为数组；但是，**如果能够区分是否为数组，应当区分。**
        ```
        ##解除变量$Target或数组变量[]Target的定义：
        .undef $Target
        ##或者
        .undef []Target
        ##以上2条指令是等价的，但应当予以区分。
        ```
    - 若某个变量（包括数组）失去作用，则应当及时解除定义。
    - **若解除数组变量的定义，且该数组有多个引用（引用计数大于1），则减少该数组1个引用计数。**
    - 关键错误：已定义同名常量（无论是否为数组），或已有同名指令，或变量的名称不符合wgs语法规定。

--------
### **.clearvar**  
> 概述：解除所有变量（包括数组）的定义，不包括保留变量。
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |无|||||
- 指令说明： 
    - 解除所有变量（包括数组）的定义，保留变量和常量（包括数组）则不受影响；
    - 若变量（包括数组）失去作用，则应当及时解除定义。
--------

## 定义判断指令（DIF指令）:
### **.ifdef**  
> 概述：这是一个.if类指令，用于判断变量或常量（包括数组）是否已定义，以进入下方不同的分支。
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |$DefName|✔|✔|||
    
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |[]DefName|✔|✔|✔||

- 指令说明：
    - 判断变量或常量（包括数组，包括保留变量、保留常量）是否已定义：   
    **已定义**：继续执行，直至遇到匹配的.else类或.endif指令，再从匹配的.endif指令继续；   
    **未定义**：跳转到下一个匹配的.else类或.endif指令。 
    >
    - 在该指令中，$DefName与[\]DefName是等价的，无论是否为数组，均能够判断它是否已定义，因为使用者可能并不知道先前定义的是否为数组；但是，**如果能够区分是否为数组，应当区分。**
        ```
        ##若$checkflag或[]checkflag已定义，执行##do_things处的语句，否则跳过：
        .ifdef $checkflag
            ##do_things
        .endif
        ##或者
        .ifdef []checkflag
            ##do_things
        .endif
        ##以上2种用法是等价的，但应当予以区分。
        ```
    - 关键错误：有同名指令，或变量的名称不符合wgs语法规定。

--------

### **.ifndef**  
> 概述：这是一个.if类指令，用于判断变量或常量（包括数组）是否未定义，以进入下方不同的分支。
- 参数列表
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |$DefName|✔|✔|||
    
    |参数名称|变量|常量|数组|赋值|
    |:-:|:-:|:-:|:-:|:-:|
    |[]DefName|✔|✔|✔||

- 指令说明：
    - 与.ifdef指令相反，判断变量或常量（包括数组，包括保留变量、保留常量）是否未定义：   
    **未定义**：继续执行，直至遇到匹配的.else类或.endif指令，再从匹配的.endif指令继续；   
    **已定义**：跳转到下一个匹配的.else类或.endif指令。 
    >
    - 在该指令中，$DefName与[\]DefName是等价的，无论是否为数组，均能够判断它是否已定义，因为使用者可能并不知道先前定义的是否为数组；但是，**如果能够区分是否为数组，应当区分。**
        ```
        ##若$checkflag或[]checkflag已定义则跳过##do_things处的语句，否则执行该处语句：
        .ifndef $checkflag
            ##do_things
        .endif
        ##或者
        .ifndef []checkflag
            ##do_things
        .endif
        ##以上2种用法是等价的，但应当予以区分。
        ```
    - 关键错误：有同名指令，或变量的名称不符合wgs语法规定。   
--------